# ArgoCD Helm Values for Development Environment
# Configured to prefer ArgoCD node group but allow overflow to application nodes

## Global Configuration
global:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes (no dedicated ArgoCD nodes)

## Server Configuration
server:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  # Service configuration
  service:
    type: NodePort  # Dev: Use port-forward for access (saves $16/month)

  # Resource limits
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

## Repo Server Configuration
repoServer:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

## Application Controller Configuration
controller:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 256Mi

## Redis Configuration
redis:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

## Dex Server Configuration (for SSO)
dex:
  enabled: true
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

## ApplicationSet Controller Configuration
applicationSet:
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

## Notifications Controller Configuration
notifications:
  enabled: true
  tolerations:
    - operator: Exists  # Dev: Run on app nodes

  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

## Config Management
configs:
  params:
    # Enable insecure mode for development (disable TLS)
    server.insecure: true

  # Configure repository credentials if needed
  repositories: {}

  # RBAC configuration
  rbac:
    policy.default: role:readonly
    policy.csv: |
      p, role:admin, applications, *, */*, allow
      p, role:admin, clusters, *, *, allow
      p, role:admin, repositories, *, *, allow
      g, admin, role:admin
